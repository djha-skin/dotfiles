#!/bin/sh

set -ex
if [ -z "${1}" ]
then
    clipboard=1
else
    clipboard=0
fi
if which grimshot >/dev/null 2>&1
then
    if [ "${clipboard}" -ne 0 ]
    then
        grimshot --cursor savecopy area | copy
    else
        grimshot --cursor save area "${1}"
    fi
elif which spectacle >/dev/null 2>&1
then
    if [ "${clipboard}" -ne 0 ]
    then
        spectacle -n -r -b -c
    else
        spectacle -n -r -b -o "${1}"
    fi
elif which screencapture >/dev/null 2>&1
then
    if [ "${clipboard}" -ne 0 ]
    then
        screencapture -i -c
    else
        screencapture -i "${1}"
    fi
elif which grim >/dev/null 2>&1
then
    if [ "${clipboard}" -ne 0 ]
    then
        grim -g "$(slurp -d)" - | copy
    else
        grim -g "$(slurp -d)" "${1}"
    fi
fi
